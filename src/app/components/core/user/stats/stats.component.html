<div class="dashboard">
  <div class="row">
    <div class="gr-12">
      <h1 class="heading heading--border">
        Statystyki <strong *ngIf="student"><br>{{ student.first_name }} {{ student.last_name }}</strong>
        <button class="button button--primary pull-right view-user-groups"
                *ngIf="user && (user.isAdmin() || user.isSupervisor())"
                [routerLink]="['/users', id || user.id, 'groups']"
        >
          <i class="fa fa-users"></i> Grupy u≈ºytkownika
        </button>
      </h1>
    </div>


    <div class="dashboard__chart">
      <canvas *ngIf="this.finished" baseChart height="80"
              [datasets]="lineChartData"
              [labels]="lineChartLabels"
              [options]="lineChartOptions"
              [colors]="lineChartColors"
              [legend]="lineChartLegend"
              [chartType]="lineChartType"
              (chartHover)="chartHovered($event)"
              (chartClick)="chartClicked($event)"></canvas>
    </div>

    <div style="clear: both"></div>

    <table *ngIf="stats" class="table">
      <thead>
        <tr>
          <th>#</th>
          <th>Data</th>
          <th>Kto</th>
          <th>Operacja</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let log of stats">
          <td>{{ log.id }}</td>
          <td>{{ log.when }}</td>
          <td>{{ log.userName }}</td>
          <td>
            {{ log.description }}&nbsp;&nbsp;&nbsp;
            <button *ngIf="log.code === 'USER_HAS_SUBMITTED_ANSWER'" class="button button--primary" [routerLink]="['/answer', log.answerId]">
              <i class="fa fa-eye"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="pagination">
      Strona: <strong>{{ currentPage }}</strong><br><br>
      <button type="button" class="button button--primary" [disabled]="!pagination.first" (click)="getUserActionLogs(pagination.first)">
        <i class="fa fa-angle-double-left"></i>
      </button>
      <button type="button" class="button button--primary" [disabled]="!pagination.prev" (click)="getUserActionLogs(pagination.prev)">
        <i class="fa fa-angle-left"></i>
      </button>
      <button type="button" class="button button--primary" [disabled]="!pagination.next" (click)="getUserActionLogs(pagination.next)">
        <i class="fa fa-angle-right"></i>
      </button>
      <button type="button" class="button button--primary" [disabled]="!pagination.last" (click)="getUserActionLogs(pagination.last)">
        <i class="fa fa-angle-double-right"></i>
      </button>
    </div>
  </div>
</div>
